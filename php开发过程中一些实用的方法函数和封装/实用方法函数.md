# PHP 实操实用方法函数

**本文记录在实际使用过程中遇到的一些技术点**

## 1. 二维数组按照键值排序
```
/**
 * 二维数组按照键值排序
 *
 * @param array  $arr 待排序数组
 * @param string $key 键值
 * @param bool $is_asc true 升序 false 降序 
 * @return mixed
 */
function sortByKey($arr, $key, $is_asc = true) 
{
  
  if ($is_asc) {
    $sort_type = SORT_ASC;
  } else {
    $sort_type = SORT_DESC;
  }
  
   $temp = array_column($arr, $key);
  array_multisort($temp, $sort_type, $arr);
  
  return $arr;
  
}
```

## 2. 根据二维数组中的部分键值判断二维数组中是否有重复值,并返回重复值
```
/**
 * 作用：根据二维数组中的部分键值判断二维数组中是否有重复值,返回重复值
 *
 * @param array $arr 目标数组
 * @param array $keys 要进行判断的键值组合的数组
 *
 * @return array 重复的值
 */
function getArrayRepeat($arr = [], $keys = [])
{
  $unique_arr = [];
  $repeat_arr = [];
  foreach ($arr as $k => $v) {
    $str = "";
    foreach ($keys as $a => $b) {
      $str .= "{$v[$b]},";
    }
    if (!in_array($str, $unique_arr)) {
      $unique_arr[] = $str;
    } else {
      $repeat_arr[] = $v;
    }
  }
  return $repeat_arr;
}
```

## 3. 均分正整数为多份，最多差值 1
```
/**
 * 均分正整数为多份
 *
 * @param int $number 要均分的正整数 或 0
 * @param int $total  均分的份数
 *
 * @return array|false|string[]
 */
function getDivideInteger(int $number, int $total)
{
    if ($number < 0 || $total <= 0) {
        return false;
    }

    // 平均整数
    $per = intval($number / $total);
    // 余数
    $rest = $number % $total;

    // 余数均分

    $number_str = str_repeat(($per + 1) . ',', $rest) . str_repeat($per . ',', $total - $rest - 1) . $per;
    return explode(',', $number_str);
}
```

## 待续